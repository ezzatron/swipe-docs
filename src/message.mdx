import CodeBlock from "./code/CodeBlock";

import thisFile from "./message.mdx?source";

import loremIpsumTs from "./example/lorem-ipsum.ts?source"; // [!section source-import-ts]
import loremIpsumGo from "./example/lorem-ipsum.go?source"; // [!section source-import-go]

# Syntax highlighting examples

## From imported files

### Default options

You can make a code block from an imported file. By default the code block will
have the filename as the title, and show line numbers.

{/* [!section-start cb-default-options] */}

<CodeBlock {...loremIpsumTs} />

{/* [!section-end cb-default-options] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="source-import-ts"
    sectionContext={false}
    title="Source import"
  />
  <CodeBlock
    {...thisFile}
    section="cb-default-options"
    sectionContext={false}
    title="Code block"
  />
</details>

### No line numbers

You can disable line numbers.

{/* [!section-start cb-no-line-numbers] */}

<CodeBlock {...loremIpsumTs} lineNumbers={false} />

{/* [!section-end cb-no-line-numbers] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="source-import-ts"
    sectionContext={false}
    title="Source import"
  />
  <CodeBlock
    {...thisFile}
    section="cb-no-line-numbers"
    sectionContext={false}
    title="Code block"
  />
</details>

### Extra filename context

You can increase how much of the filename is shown.

{/* [!section-start cb-filename-context] */}

<CodeBlock {...loremIpsumTs} filenameContext={2} />

{/* [!section-end cb-filename-context] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="source-import-ts"
    sectionContext={false}
    title="Source import"
  />
  <CodeBlock
    {...thisFile}
    section="cb-filename-context"
    sectionContext={false}
    title="Code block"
  />
</details>

### Custom title

You can set a custom title.

{/* [!section-start cb-custom-title] */}

<CodeBlock {...loremIpsumTs} title="Lorem ipsum" />

{/* [!section-end cb-custom-title] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="source-import-ts"
    sectionContext={false}
    title="Source import"
  />
  <CodeBlock
    {...thisFile}
    section="cb-custom-title"
    sectionContext={false}
    title="Code block"
  />
</details>

### Linkable code blocks

You can give the code block an ID, which makes it linkable.

{/* [!section-start cb-permalink] */}

<CodeBlock {...loremIpsumTs} id="lorem-ipsum-ts-permalink" />

{/* [!section-end cb-permalink] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="source-import-ts"
    sectionContext={false}
    title="Source import"
  />
  <CodeBlock
    {...thisFile}
    section="cb-permalink"
    sectionContext={false}
    title="Code block"
  />
</details>

### Support for tab indentation

You can highlight code for languages that use tab indentation. You can select
any whitespace to make the tabs and spaces visible.

{/* [!section-start cb-tabs] */}

<CodeBlock {...loremIpsumGo} id="lorem-ipsum-go" />

{/* [!section-end cb-tabs] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="source-import-go"
    sectionContext={false}
    title="Source import"
  />
  <CodeBlock
    {...thisFile}
    section="cb-tabs"
    sectionContext={false}
    title="Code block"
  />
</details>

### Sections with expandable context

You can define sections in the example code with annotations, and show only a
specific section. Sections are expandable to show more context.

{/* [!section-start cb-sections] */}

<CodeBlock
  {...loremIpsumTs}
  section="ipsum"
  title={
    <>
      <code>ipsum</code> function
    </>
  }
/>
<CodeBlock
  {...loremIpsumTs}
  section="ipsum-adipiscing"
  title={
    <>
      <code>ipsum</code> function <code>adipiscing</code> callback
    </>
  }
/>
<CodeBlock
  {...loremIpsumTs}
  section="ipsum-adipiscing-return"
  title={
    <>
      <code>ipsum</code> function <code>adipiscing</code> callback{" "}
      <code>return</code> statement
    </>
  }
/>

{/* [!section-end cb-sections] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="source-import-ts"
    sectionContext={false}
    title="Source import"
  />
  <CodeBlock
    {...thisFile}
    section="cb-sections"
    sectionContext={false}
    title="Code blocks"
  />
  <CodeBlock
    {...loremIpsumTs}
    source={loremIpsumTs.source.replaceAll(/\/\/ \[!/g, "// [\\!")}
    title="Section annotations"
  />
</details>

### From Markdown code blocks

You can use normal Markdown code blocks, which support all the same features.

{/* [!section-start cb-markdown] */}

```
Hello, World!
```

```ts title="hello-world.ts"
console.log("Hello, World!");
```

```sh
echo "Hello, World!"
```

```console
user@foo$ echo "Hello, World!" > hello.txt
Hello, World!
user@foo$ 1s -1 | grep ".txt"
hello.txt
```

{/* [!section-end cb-markdown] */}

<details>
  <summary>Source</summary>
  <CodeBlock
    {...thisFile}
    section="cb-markdown"
    sectionContext={false}
    title="Code blocks"
  />
</details>
